class Timer{constructor(t){let e=t.appendChild(Element('div','timer-box')),s=e.appendChild(Element('div','timer-anm')),i=e.appendChild(Element('div','timer-val')),a=s.appendChild(Element('div','timer-wave')),n=s.appendChild(Element('div','timer-m')),m=s.appendChild(Element('div','timer-s'));this.timerBox=e,this.duration=1/0,this.anmWave=a,this.anmM=n,this.anmS=m,this.anmIndex=0,this.startTime=0,this.number=[];for(let t=0;t<11;t++){let e=i.appendChild(Element('span')),s='00:00:00.00'[t];e.innerText=s,t>7?(e.style.fontSize='36px',e.style.width=t>8?'28px':'12px'):e.style.width='0'===s?'48px':'16px','0'===s&&this.number.push(e)}Number(localStorage.getItem('timer.status'))?(this.startTime=Number(localStorage.getItem('timer.start'))||Date.now(),this.start(!1)):(this.pauseTime=Number(localStorage.getItem('timer.pause')),this.pauseTime&&(this.startTime=Date.now()-this.pauseTime,this.start(!1),this.pause()))}set status(t){localStorage.setItem('timer.start',this.startTime),localStorage.setItem('timer.pause',this.pauseTime),localStorage.setItem('timer.status',t)}startAnm(){css([this.anmWave,this.anmM,this.anmS],{animationPlayState:'running'})}pauseAnm(){css([this.anmWave,this.anmM,this.anmS],{animationPlayState:'paused'})}setAnm(t){let e=-t/1e3;this.anmIndex=1-this.anmIndex,this.anmWave.style.animationName='wave, rise'+this.anmIndex,this.anmWave.style.animationDelay='0s, '+e+'s',this.anmM.style.animationName='clock'+this.anmIndex,this.anmM.style.animationDelay=e%3600+'s',this.anmS.style.animationName='clock'+this.anmIndex,this.anmS.style.animationDelay=e%60+'s'}start(t=!0){if(this.run)return;t&&(this.startTime=this.pauseTime?Date.now()-this.pauseTime:Date.now()),this.update(),this.run=setInterval(this.update.bind(this),33),this.anmWave.style.display='block';let e=Date.now()-this.startTime;this.startAnm(),this.setAnm(e),this.pauseTime=0,this.status=1}pause(){this.run&&(this.update(),clearInterval(this.run),this.run=0,this.pauseTime=Date.now()-this.startTime,this.pauseAnm(),this.status=0)}reset(){clearInterval(this.run),this.run=0;for(let t=0;t<8;t++)this.number[t].innerText='0';this.anmWave.style.display='none',this.setAnm(0),this.pauseAnm(),this.pauseTime=0,this.status=0}setDuration(t){this.duration=Number(t),this.anmWave.style.animationDuration='4s, '+60*this.duration+'s',this.setAnm(this.run?Date.now()-this.startTime:this.pauseTime)}setTime(t){let e=1e3*Time.toNumber(t);this.startTime=Date.now()-e,this.run?this.status=1:(this.pauseTime=e,this.status=0),this.update(),this.setAnm(e)}update(){let t=Time.toString((Date.now()-this.startTime)/1e3,!0);for(let e=0;e<8;e++)this.number[e].innerText=t[e]}}